#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
分析上海金的正确单位

上海黄金交易所的上海金(SHAU)：
- 交易单位：1000克/手
- 报价单位：元（人民币）/克
- 最小变动价位：0.01元/克

所以 API 返回的价格应该就是元/克的价格
但是API返回 f43=113794，这个数字太大了

让我们查看东方财富网的字段说明
"""

# 根据东方财富网的字段定义
# f43: 最新价
# 但是这个价格的单位是什么？

# 测试数据
f43 = 113794  # API返回的原始值
f170 = 440    # 涨跌幅

print("=" * 70)
print("分析上海金价格单位")
print("=" * 70)

print("\n【上海金基本信息】")
print("- 交易单位：1000克/手")
print("- 报价单位：元（人民币）/克")
print("- 最小变动价位：0.01元/克")
print("- 参考价格范围：2024年约 520-580 元/克")

print("\n【API数据分析】")
print(f"f43 (原始值) = {f43}")
print(f"f170 (原始值) = {f170}")

print("\n【可能性1：f43单位是 0.01元/克（分）】")
price1 = f43 / 100
pct1 = f170
print(f"  价格 = {f43} / 100 = {price1:.2f} 元/克")
print(f"  涨跌幅 = {pct1:.2f}%")
print(f"  ❌ 涨跌幅 440% 不合理")

print("\n【可能性2：f43单位是 0.01元/克，f170单位是 0.01%】")
price2 = f43 / 100
pct2 = f170 / 100
print(f"  价格 = {f43} / 100 = {price2:.2f} 元/克")
print(f"  涨跌幅 = {f170} / 100 = {pct2:.2f}%")
print(f"  ❌ 价格 {price2:.2f} 元/克太高（应该约550元/克）")

print("\n【可能性3：f43单位是 0.0001元/克，f170单位是 0.01%】")
price3 = f43 / 10000
pct3 = f170 / 100
print(f"  价格 = {f43} / 10000 = {price3:.2f} 元/克")
print(f"  涨跌幅 = {f170} / 100 = {pct3:.2f}%")
print(f"  ❌ 价格 {price3:.2f} 元/克太低")

print("\n【可能性4：价格数据本身闭市，显示的是昨天数据】")
print("  等等...f43 和 f60 相同，都是 113794")
print("  这说明当前价格等于昨收价，可能是闭市状态")
print("  f170 = 440 可能是错误数据或者上一次的涨跌幅")

print("\n【重新思考】")
print("  如果今天闭市，f43=f60=113794")
print("  这意味着昨天收盘价是 113794（原始单位）")
print("  按照合理价格 550元/克 推算：")
print(f"    550 × 100 = 55000  ❌")
print(f"    550 × 1000 = 550000  ❌")
print(f"    113794 / 100 = 1137.94  ❌ 太高")
print(f"    113794 / 200 = 568.97  ✅ 接近！")

print("\n【测试除以200】")
divisor = 200
price = f43 / divisor
print(f"  价格 = {f43} / {divisor} = {price:.2f} 元/克")
print(f"  ✅ 这个价格合理！")

print("\n" + "=" * 70)
