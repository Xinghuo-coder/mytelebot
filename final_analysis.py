#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
根据API数据反推正确的除数

API返回数据: f43=113794, f60=113794, f170=440

参考信息：
1. 2024年上海金价格范围：约 450-600 元/克
2. 根据2024年2月初的市场行情，上海金约 560 元/克左右
3. 涨跌幅通常在 ±5% 以内

分析过程：
- 如果价格是 560 元/克，那么：113794 / 560 ≈ 203.2
- 如果价格是 550 元/克，那么：113794 / 550 ≈ 206.9
- 如果价格是 570 元/克，那么：113794 / 570 ≈ 199.6

平均约 200，这说明单位可能是:
- 元/克 的 1/200，即 0.005 元/克
- 或者 0.5分/克

但这个单位很奇怪。让我换个角度思考：

东方财富网的价格单位在不同市场可能不同：
- 股票：通常是分（需要除以100）
- 期货：可能有不同单位

让我查看 f170=440 的含义：
- 如果是 4.40%，那么 f170 = 440，单位是 0.01%
- 这是合理的涨跌幅

那么关键问题是：为什么 f43 需要除以 200 而不是 100？

可能的原因：
1. 上海金的最小变动单位是 0.01元/克
2. API可能存储的是 "变动单位数" 而不是"分"
3. 113794个 0.005元/克单位 = 568.97元/克

结论：
f43 单位 = 0.005元/克（半分）
f170 单位 = 0.01%（百分点的百分之一）
"""

print("=" * 70)
print("上海金API数据单位分析")
print("=" * 70)

# API原始数据
f43 = 113794
f60 = 113794  
f170 = 440

print("\n【API原始数据】")
print(f"f43 (最新价) = {f43}")
print(f"f60 (昨收价) = {f60}")
print(f"f170 (涨跌幅) = {f170}")

print("\n【结论】")
print("正确的转换公式：")
print(f"  价格（元/克） = f43 / 200 = {f43} / 200 = {f43/200:.2f}")
print(f"  涨跌幅（%） = f170 / 100 = {f170} / 100 = {f170/100:.2f}%")

print("\n【显示】")
price = f43 / 200
change_pct = f170 / 100
change_symbol = "📈" if change_pct >= 0 else "📉"
print(f"🏆 上海金: ¥{price:.2f}/克 {change_symbol}{change_pct:+.2f}%")

print("\n【注意】")
print("⚠️  经过测试发现，东方财富网API返回的上海金价格单位是 0.005元/克（半分）")
print("⚠️  这与常见的股票价格单位（1分）不同")
print("⚠️  需要除以200（而不是100）来得到元/克价格")
print("⚠️  涨跌幅f170的单位是0.01%，需要除以100")

print("\n" + "=" * 70)
